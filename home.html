<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kantin Q - Pesan Makan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .hide-scroll::-webkit-scrollbar { display: none; }
        .hide-scroll { -ms-overflow-style: none; scrollbar-width: none; }
        .modal { transition: opacity 0.25s ease; }
        
        /* Animasi Dropdown */
        .dropdown-enter { animation: slideDown 0.2s ease-out forwards; }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans text-gray-800 pb-20" onclick="closeDropdowns(event)">

    <nav class="sticky top-0 z-40 bg-white shadow-sm px-4 py-3 flex justify-between items-center">
        <div class="flex flex-col">
            <span class="text-xs text-gray-400">Lokasi Anda</span>
            <div class="flex items-center font-bold text-blue-600 text-sm">
                <i class="fas fa-map-marker-alt mr-2"></i> Kantin ITPLN
            </div>
        </div>

        <div class="flex items-center space-x-4 relative">
            
            <button onclick="window.location.href='checkout.html'" class="relative p-2 text-gray-600 hover:text-blue-600">
                <i class="fas fa-shopping-cart text-xl"></i>
                <span id="cart-badge" class="absolute top-0 right-0 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full hidden">0</span>
            </button>

            <div class="relative">
                <button onclick="toggleProfileMenu()" class="focus:outline-none block">
                    <img src="https://ui-avatars.com/api/?name=Lionel+Gibran&background=0D8ABC&color=fff" class="w-9 h-9 rounded-full border border-gray-200 hover:border-blue-500 transition">
                </button>

                <div id="profile-menu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden z-50 dropdown-enter">
                    <div class="px-4 py-3 border-b border-gray-100 bg-gray-50">
                        <p class="text-sm font-bold text-gray-900">Lionel Gibran</p>
                        <p class="text-xs text-gray-500 truncate">202431174@itpln.ac.id</p>
                    </div>
                    <a href="profil.html" class="block px-4 py-3 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition">
                        <i class="fas fa-user-edit w-5"></i> Edit Profil
                    </a>
                    <a href="tracking.html" class="block px-4 py-3 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition">
                        <i class="fas fa-history w-5"></i> Riwayat Pesanan
                    </a>
                    <div class="border-t border-gray-100"></div>
                    <a href="login.html" class="block px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition font-medium">
                        <i class="fas fa-sign-out-alt w-5"></i> Keluar
                    </a>
                </div>
            </div>

        </div>
    </nav>

    <div class="p-4 bg-white mb-2">
        <div class="relative mb-4">
            <i class="fas fa-search absolute top-3.5 left-4 text-gray-400 text-sm"></i>
            <input type="text" placeholder="Mau makan apa hari ini?" class="w-full pl-10 pr-4 py-3 bg-gray-100 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-200">
        </div>

        <div class="bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl p-4 text-white flex justify-between items-center shadow-lg transform transition hover:scale-[1.02] cursor-pointer">
            <div>
                <span class="bg-yellow-400 text-yellow-900 text-[10px] font-bold px-2 py-1 rounded mb-1 inline-block">PROMO</span>
                <h3 class="font-bold text-lg">Diskon 20%</h3>
                <p class="text-xs text-blue-100">Kode: KANTINSERU</p>
            </div>
            <i class="fas fa-hamburger text-4xl opacity-50"></i>
        </div>
    </div>

    <div class="px-4 mb-4">
        <h3 class="font-bold text-gray-800 mb-3 text-sm">Kategori</h3>
        <div class="flex space-x-3 overflow-x-auto hide-scroll pb-2" id="category-container">
            <button onclick="setActiveCategory(this)" class="category-btn flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-full text-xs font-medium whitespace-nowrap shadow-md transition-all duration-200">
                <i class="fas fa-utensils"></i> <span>Semua</span>
            </button>
            
            <button onclick="setActiveCategory(this)" class="category-btn flex items-center space-x-2 bg-white border border-gray-200 text-gray-600 px-4 py-2 rounded-full text-xs font-medium whitespace-nowrap hover:bg-gray-50 transition-all duration-200">
                <i class="fas fa-bowl-rice"></i> <span>Makanan Berat</span>
            </button>
            
            <button onclick="setActiveCategory(this)" class="category-btn flex items-center space-x-2 bg-white border border-gray-200 text-gray-600 px-4 py-2 rounded-full text-xs font-medium whitespace-nowrap hover:bg-gray-50 transition-all duration-200">
                <i class="fas fa-coffee"></i> <span>Minuman</span>
            </button>
            
            <button onclick="setActiveCategory(this)" class="category-btn flex items-center space-x-2 bg-white border border-gray-200 text-gray-600 px-4 py-2 rounded-full text-xs font-medium whitespace-nowrap hover:bg-gray-50 transition-all duration-200">
                <i class="fas fa-cookie-bite"></i> <span>Snack</span>
            </button>
        </div>
    </div>

    <div class="px-4 pb-20">
        <h3 class="font-bold text-gray-800 mb-3 text-sm">Rekomendasi Untukmu</h3>
        <div class="grid grid-cols-2 gap-4">
            
            <div class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex flex-col justify-between">
                <div>
                    <div class="relative">
                        <img src="https://images.unsplash.com/photo-1603064752734-4c48eff53d05?w=400&q=80" class="w-full h-32 object-cover rounded-lg mb-2">
                        <div class="absolute bottom-1 right-1 bg-white px-1.5 py-0.5 rounded text-[10px] font-bold shadow flex items-center">
                            <i class="fas fa-star text-yellow-400 mr-1"></i> 4.8
                        </div>
                    </div>
                    <p class="text-[10px] text-gray-500 mb-0.5"><i class="fas fa-store mr-1"></i>Ayam Geprek Mas Budi</p>
                    <h4 class="font-bold text-sm text-gray-800 leading-tight mb-1">Paket Ayam Geprek + Es Teh</h4>
                    <p class="text-blue-600 font-bold text-sm">Rp 18.000</p>
                </div>
                <button onclick="openModal('Paket Ayam Geprek', 18000)" class="w-full mt-3 bg-blue-50 text-blue-600 hover:bg-blue-600 hover:text-white font-bold py-1.5 rounded-lg text-xs transition">
                    Tambah
                </button>
            </div>

            <div class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex flex-col justify-between opacity-75 grayscale relative">
                <div class="absolute inset-0 bg-gray-100 bg-opacity-50 flex items-center justify-center rounded-xl z-10">
                    <span class="bg-gray-800 text-white text-xs font-bold px-3 py-1 rounded-full">HABIS</span>
                </div>
                <div>
                    <img src="https://images.unsplash.com/photo-1512058564366-18510be2db19?w=400&q=80" class="w-full h-32 object-cover rounded-lg mb-2">
                    <p class="text-[10px] text-gray-500 mb-0.5"><i class="fas fa-store mr-1"></i>Soto Seger</p>
                    <h4 class="font-bold text-sm text-gray-800 leading-tight mb-1">Nasi Soto Ayam</h4>
                    <p class="text-gray-500 font-bold text-sm">Rp 12.000</p>
                </div>
                <button disabled class="w-full mt-3 bg-gray-200 text-gray-400 font-bold py-1.5 rounded-lg text-xs cursor-not-allowed">Stok Habis</button>
            </div>

            <div class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex flex-col justify-between">
                <div>
                    <div class="relative">
                        <img src="https://images.unsplash.com/photo-1541167760496-1628856ab772?w=400&q=80" class="w-full h-32 object-cover rounded-lg mb-2">
                        <div class="absolute bottom-1 right-1 bg-white px-1.5 py-0.5 rounded text-[10px] font-bold shadow flex items-center">
                            <i class="fas fa-star text-yellow-400 mr-1"></i> 4.5
                        </div>
                    </div>
                    <p class="text-[10px] text-gray-500 mb-0.5"><i class="fas fa-store mr-1"></i>Kopi Kenangan</p>
                    <h4 class="font-bold text-sm text-gray-800 leading-tight mb-1">Es Kopi Susu Aren</h4>
                    <p class="text-blue-600 font-bold text-sm">Rp 15.000</p>
                </div>
                <button onclick="openModal('Es Kopi Susu', 15000)" class="w-full mt-3 bg-blue-50 text-blue-600 hover:bg-blue-600 hover:text-white font-bold py-1.5 rounded-lg text-xs transition">Tambah</button>
            </div>

            <div class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex flex-col justify-between">
                <div>
                    <div class="relative">
                        <img src="https://images.unsplash.com/photo-1559181567-c3190ca9959b?w=400&q=80" class="w-full h-32 object-cover rounded-lg mb-2">
                        <div class="absolute bottom-1 right-1 bg-white px-1.5 py-0.5 rounded text-[10px] font-bold shadow flex items-center">
                            <i class="fas fa-star text-yellow-400 mr-1"></i> 4.9
                        </div>
                    </div>
                    <p class="text-[10px] text-gray-500 mb-0.5"><i class="fas fa-store mr-1"></i>Fruit Station</p>
                    <h4 class="font-bold text-sm text-gray-800 leading-tight mb-1">Salad Buah Segar</h4>
                    <p class="text-blue-600 font-bold text-sm">Rp 20.000</p>
                </div>
                <button onclick="openModal('Salad Buah', 20000)" class="w-full mt-3 bg-blue-50 text-blue-600 hover:bg-blue-600 hover:text-white font-bold py-1.5 rounded-lg text-xs transition">Tambah</button>
            </div>
        </div>
    </div>

    <div id="modal-order" class="fixed inset-0 z-50 hidden opacity-0 pointer-events-none transition-opacity duration-300">
        <div class="absolute inset-0 bg-black bg-opacity-50" onclick="closeModal()"></div>
        <div class="absolute bottom-0 left-0 w-full bg-white rounded-t-2xl p-6 transform transition-transform duration-300 translate-y-full" id="modal-panel">
            <div class="w-12 h-1.5 bg-gray-300 rounded-full mx-auto mb-4"></div>
            <h3 id="modal-title" class="text-lg font-bold text-gray-800 mb-1">Nama Makanan</h3>
            <p id="modal-price" class="text-blue-600 font-bold mb-4">Rp 0</p>
            <hr class="border-gray-100 mb-4">
            <div class="mb-4">
                <label class="block text-sm font-bold text-gray-700 mb-2">Level Pedas</label>
                <div class="flex space-x-2">
                    <button class="flex-1 py-2 border rounded-lg text-xs hover:bg-blue-50 hover:border-blue-500 focus:ring-2 focus:ring-blue-500">Tidak Pedas</button>
                    <button class="flex-1 py-2 border rounded-lg text-xs hover:bg-blue-50 hover:border-blue-500 focus:ring-2 focus:ring-blue-500">Sedang</button>
                    <button class="flex-1 py-2 border rounded-lg text-xs hover:bg-blue-50 hover:border-blue-500 focus:ring-2 focus:ring-blue-500">Pedas ðŸ”¥</button>
                </div>
            </div>
            <div class="mb-6">
                <label class="block text-sm font-bold text-gray-700 mb-2">Catatan</label>
                <textarea class="w-full border rounded-lg p-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" rows="2" placeholder="Contoh: Jangan pakai bawang..."></textarea>
            </div>
            <div class="flex space-x-3">
                <div class="flex items-center border rounded-lg px-3">
                    <button class="text-gray-500 p-2">-</button>
                    <span class="px-2 text-sm font-bold">1</span>
                    <button class="text-blue-600 p-2">+</button>
                </div>
                <button onclick="addToCart()" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl shadow-lg transition">Masuk Keranjang</button>
            </div>
        </div>
    </div>

    <script>
        // 1. LOGIC DROPDOWN PROFILE
        function toggleProfileMenu() {
            const menu = document.getElementById('profile-menu');
            // Stop event bubbling supaya dropdown gak langsung nutup lagi pas diklik
            event.stopPropagation();
            menu.classList.toggle('hidden');
        }

        // Tutup dropdown kalau klik di luar
        function closeDropdowns(event) {
            const menu = document.getElementById('profile-menu');
            if (!menu.classList.contains('hidden')) {
                menu.classList.add('hidden');
            }
        }

        // 2. LOGIC KATEGORI AKTIF (VISUAL)
        function setActiveCategory(clickedBtn) {
            // Ambil semua tombol kategori
            const allBtns = document.querySelectorAll('.category-btn');
            
            // Reset style semua tombol jadi "Tidak Aktif" (Putih)
            allBtns.forEach(btn => {
                btn.className = "category-btn flex items-center space-x-2 bg-white border border-gray-200 text-gray-600 px-4 py-2 rounded-full text-xs font-medium whitespace-nowrap hover:bg-gray-50 transition-all duration-200 cursor-pointer";
            });

            // Set tombol yang diklik jadi "Aktif" (Biru)
            clickedBtn.className = "category-btn flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-full text-xs font-medium whitespace-nowrap shadow-md transition-all duration-200 cursor-pointer";
        }

        // 3. LOGIC MODAL CART
        let cartCount = 0;
        function openModal(title, price) {
            document.getElementById('modal-title').innerText = title;
            document.getElementById('modal-price').innerText = 'Rp ' + price.toLocaleString('id-ID');
            const modal = document.getElementById('modal-order');
            const panel = document.getElementById('modal-panel');
            modal.classList.remove('hidden', 'pointer-events-none');
            setTimeout(() => {
                modal.classList.remove('opacity-0');
                panel.classList.remove('translate-y-full');
            }, 10);
        }

        function closeModal() {
            const modal = document.getElementById('modal-order');
            const panel = document.getElementById('modal-panel');
            modal.classList.add('opacity-0');
            panel.classList.add('translate-y-full');
            setTimeout(() => {
                modal.classList.add('hidden', 'pointer-events-none');
            }, 300);
        }

        function addToCart() {
            cartCount++;
            const badge = document.getElementById('cart-badge');
            badge.innerText = cartCount;
            badge.classList.remove('hidden');
            closeModal();
        }
    </script>
</body>
</html>